var GenSerpSectionControl;(function(n){function i(n,t){while(n){if(n.matches(t))return n;n=n.parentElement}return null}function s(n,t){var i={},r,u;if(n)for(r in n)i[r]=n[r];if(t)for(u in t)i[u]=t[u];return i}function y(n){n&&(t=n)}function r(){var r=_d.querySelectorAll(".gs_secctrl .gs_tblike, .gs_secctrl .gs_tbdislike"),i,n,t;for(n of r)t=n.parentElement.getAttribute("sct-id"),t&&!n.dataset.init&&(n.dataset.init="1",sj_be(n,"click",c));i=_d.querySelectorAll(".gs_secctrl .gs_copy");for(n of i)t=n.parentElement.getAttribute("sct-id"),t&&!n.dataset.init&&(n.dataset.init="1",sj_be(n,"click",l),sj_be(n,"keydown",a),sj_be(n,"keyup",v));_w.hasAiDisclaimer&&h()}const u="SecIdx";let t=undefined;const f={extqna:"ExtractiveQnA",gsqnanrt:"GenQnA_NRT_TLDR",gsqnaonl:"GenQnA_Online_TLDR"},e=(n,t,i,r,f="SectionFeedBack")=>{Log.Log(i?"PositiveInteractionEvent":"NegativeInteractionEvent","APSAT",f,!1,"AppNS",n,"K",t,u,r)},h=()=>{const t="__aiEscGlobalBound";if(!_w[t]){_w[t]=!0;const n=_qs(".copans_container");if(n){const i=n=>{const t=n.getAttribute("aria-expanded")==="true";n.setAttribute("aria-expanded",t?"false":"true")};sj_be(n,"keydown",function(n){var r,u,f;const t=(u=(r=n.target)===null||r===void 0?void 0:r.closest)===null||u===void 0?void 0:u.call(r,".gs_aidisc");t&&(n.key==="Enter"?(sj_pd(n),i(t)):n.key==="Escape"&&(sj_pd(n),t.setAttribute("aria-expanded","false"),(f=t.focus)===null||f===void 0?void 0:f.call(t)))});sj_be(n,"click",function(n){const t=n.target,u=t.closest(".gs_infobbl");if(!u){const r=t.closest(".gs_aidisc");r&&i(r)}});sj_be(n,"focusout",function(n){var t,i;const r=(i=(t=n.target)===null||t===void 0?void 0:t.closest)===null||i===void 0?void 0:i.call(t,".gs_aidisc"),u=n.relatedTarget;!r||u&&r.contains(u)||r.setAttribute("aria-expanded","false")})}}},c=n=>{var h,c,i=n.currentTarget,r=o(i),p,u,l,s;const v=r===null||r===void 0?void 0:r.dataset.k,y=r===null||r===void 0?void 0:r.dataset.appns;if(p=i.parentElement.getAttribute("sct-id"),p&&!i.classList.contains("gs_fb_voted")){u=i.classList.contains("gs_tblike");l=(c=(h=i.parentElement)===null||h===void 0?void 0:h.dataset.secIdx)!==null&&c!==void 0?c:"";let a=i.closest(".qna_tlgacont");if(a!=null&&a.contains(i)){const n=Object.keys(f);for(let t=0;t<n.length;t++)if(a.classList.contains(n[t])){e(y,v,u,l,f[n[t]]);break}}else e(y,v,u,l);u||_w.Feedback&&_w.Feedback.Bootstrap&&_w.Feedback.Bootstrap.launchFeedback&&(t?_w.Feedback.Bootstrap.launchFeedback(t):_w.Feedback.Bootstrap.launchFeedback());i.classList.contains("gs_fb_voted")||(s=i.parentElement.querySelector(".gs_fb_voted"),s&&(s.classList.remove("gs_fb_voted"),s.setAttribute("aria-pressed","false")),i.classList.add("gs_fb_voted"),i.setAttribute("aria-pressed","true"))}},l=n=>{var r,f,e=n.currentTarget,t=o(e),y,c,l;const p=t===null||t===void 0?void 0:t.dataset.k,w=t===null||t===void 0?void 0:t.dataset.appns,b=s(_w._genserpData,_w._genserpAjaxData),k=s(_w._genserpSources,_w._genserpAjaxSources);let h=e.parentElement.getAttribute("sct-id"),a=sj_ce("div",null,null);a.innerHTML=h;let d=a.innerText;var v=b[h],g=k[h],nt=(f=(r=e.parentElement)===null||r===void 0?void 0:r.dataset.secIdx)!==null&&f!==void 0?f:"";if(Log.Log("InteractionEvent","APSAT","CopyToClipboard",!1,"AppNS",w,"K",p,u,nt),v&&window.ClipboardItem&&navigator.clipboard.write){var tt=v.join("\r\n"),it=g.join("\r\n"),i=d+"\r\n"+tt+"\r\n\r\nSource(s):\r\n"+it;if(window.markdownit){let n=document.createElement("div");n.innerHTML=window.markdownit({html:!1}).render(i);i=n.innerText}y=new ClipboardItem({"text/plain":new Blob([i],{type:"text/plain"})});try{navigator.clipboard.write([y])}catch(rt){navigator.clipboard.writeText(i)}}else c=_d.getSelection(),l=_d.createRange(),l.selectNodeContents(t),c.removeAllRanges(),c.addRange(l),_d.execCommand("copy"),window.getSelection().removeAllRanges();GenSerpScreenReader&&GenSerpScreenReader.announce(_w._locStringSectionCopied)},o=n=>{let t=i(n,".gs_temp");if(!t&&i(n,".gs_pre_cont_root")&&(t=_d.querySelector(".gs_temp")),!t){let r=i(n,".gs_section");t=r===null||r===void 0?void 0:r.querySelector(".gs_temp")}return t},a=n=>{var t=n.currentTarget;t&&n.key=="Enter"&&t.classList.add("gs_sec_copied")},v=n=>{var t=n.currentTarget;t&&n.key=="Enter"&&t.classList.remove("gs_sec_copied")};n.setFeedbackFormArgs=y;n.init=r;sj_evt.bind("wptajaxgenserp_complete",r,!0);sj_evt.bind("wptajaxgenserp_exp",r,!0);_w.sj_evt&&sj_evt.fire("SectionControlReady")})(GenSerpSectionControl||(GenSerpSectionControl={}))