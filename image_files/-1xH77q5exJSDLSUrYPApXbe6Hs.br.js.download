var InlineCitationInst;(function(n){function s(){sj_evt.bind(i,r,!0);sj_evt.bind(i,a,!0);sj_evt.bind(u,r,!0);sj_evt.bind(f,h,!0)}function h(){var n,i;if(_w._copilotSearchEnabled){const r=t(),u=_qs(".b_genserp_container");if(u){const e=_qs(".b_genserp_citation_hover_md",u);if(r&&e&&typeof CopilotAnswerResponseInfoMessage!="undefined"){const s=e.querySelectorAll(".acf-carousel-pbp__list .acf-carousel-pbp__item a.hov-item"),o=Array.prototype.slice.call(s),f=[];for(let t=0;t<o.length;t++){const u=o[t];let r=u.getAttribute("href")||null;r&&r.endsWith("&ntb=1")&&(r=r.slice(0,-6));f.push({index:t,url:r,title:((i=(n=_qs(".hov-item-ttl",u))===null||n===void 0?void 0:n.textContent)===null||i===void 0?void 0:i.trim())||null})}const h=function(){const n=u.querySelectorAll(".gs_p > .gs_sup_cit"),t=[];for(let i=0;i<n.length;i++){const u=n[i],r=u.parentElement,f=r&&typeof r.closest=="function"?!!r.closest(".gs_cit_stry_item"):!1;f||t.push(u)}return t}();c(f,r);l(h,f,r)}}}}function c(n,t){const i=[],r=[];for(const t of n)i.push(t.title||""),r.push(t.url||"");CopilotAnswerResponseInfoMessage===null||CopilotAnswerResponseInfoMessage===void 0?void 0:CopilotAnswerResponseInfoMessage.logCopilotSearchResponseSources(e,{ResponseId:t,Titles:JSON.stringify(i),Urls:JSON.stringify(r)})}function l(n,t,i){const r=[];for(let i=0;i<n.length;i++){const o=n[i],u=_qs(".gs_sm_cit_dom",o),f=u===null||u===void 0?void 0:u.dataset.sups;if(!f)return;const s=f.split(","),e=[];for(const n of s){const t=Number(n.trim());isNaN(t)||e.push(t)}e.forEach(n=>{const i=t[n-1];i&&r.push(i.url||"")})}CopilotAnswerResponseInfoMessage===null||CopilotAnswerResponseInfoMessage===void 0?void 0:CopilotAnswerResponseInfoMessage.logCopilotSearchResponseSources(o,{ResponseId:i,Urls:JSON.stringify(r)})}function r(){const n=_d.querySelector(".b_genserp_container"),t=n===null||n===void 0?void 0:n.querySelectorAll(".gs_temp .gs_sm_cit");t===null||t===void 0?void 0:t.forEach(function(n){v(n)});const i=n===null||n===void 0?void 0:n.querySelectorAll(".gs_cit_cont .gs_cit");i===null||i===void 0?void 0:i.forEach(function(n){n&&sj_be(n,"click",p)});const r=n===null||n===void 0?void 0:n.querySelectorAll(".gs_temp .gs_mdlink");r===null||r===void 0?void 0:r.forEach(function(n){n&&sj_be(n,"click",w)})}function a(){sj_evt.fire("gs_cits_replace")}function v(n){n&&sj_be(n,"click",y)}function y(n){if(n.stopPropagation(),Log.Log("Click","GenSerp","InlineCitationItemClick",!1),_w._copilotSearchEnabled&&typeof CopilotAnswerResponseInfoMessage!="undefined"){const r=n.target,i=r.closest("a");if((i===null||i===void 0?void 0:i.tagName.toLowerCase())==="a"){const n=i.getAttribute("href"),r=t();r&&n&&(CopilotAnswerResponseInfoMessage===null||CopilotAnswerResponseInfoMessage===void 0?void 0:CopilotAnswerResponseInfoMessage.logCopilotSearchInteractionEvent("InlineCitationClick",{ResponseId:r,Url:n}))}}}function p(n){if(n.stopPropagation(),Log.Log("Click","GenSerp","CardedCitationClick",!1),_w._copilotSearchEnabled&&typeof CopilotAnswerResponseInfoMessage!="undefined"){const e=n.target,i=e.closest(".gs_cit"),r=i.getAttribute("data-title"),u=i.getAttribute("data-url"),f=t();f&&r&&u&&(CopilotAnswerResponseInfoMessage===null||CopilotAnswerResponseInfoMessage===void 0?void 0:CopilotAnswerResponseInfoMessage.logCopilotSearchInteractionEvent("CitationCardClick",{ResponseId:f,Title:r,Url:u}))}}function w(n){if(n.stopPropagation(),Log.Log("Click","GenSerp","PassageLinkClick",!1),_w._copilotSearchEnabled&&typeof CopilotAnswerResponseInfoMessage!="undefined"){const f=n.target,i=f.closest(".gs_mdlink"),r=i===null||i===void 0?void 0:i.getAttribute("href"),u=t();u&&r&&(CopilotAnswerResponseInfoMessage===null||CopilotAnswerResponseInfoMessage===void 0?void 0:CopilotAnswerResponseInfoMessage.logCopilotSearchInteractionEvent("PassageLinkClick",{ResponseId:u,Url:r}))}}function t(){if(!_w._copilotSearchEnabled)return null;const n=new URLSearchParams(_w.location.search),t=n.get("turnindex"),i=n.get("convid");return t+"-"+i}const i="wptajaxgenserp_complete",u="wptajaxgenserp_exp",f="gs_pexp_complete",e="CitationCardData",o="InlineCitationData";n.init=s;sj_evt===null||sj_evt===void 0?void 0:sj_evt.fire("InlineCitationInst_Ready")})(InlineCitationInst||(InlineCitationInst={}))